README File.

TO TEST THIS PROJECT USE THE CURL COMMANDS BELOW. 
FOR DETAILS ON THE PROJECT SKIP DOWN

=========
POSTMAN
=========

The Tests performed through Postman have been successful and the results are included in the following files :

assistant.json
director.json
producer.json

================
CURL COMMANDS
================

To use the Curl Commands please export the required token to the local variable ACCESS_TOKEN

Cast Assistant Token : export ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlZNa0t5ZW93ZEdYeG9LWVQzcXFaYSJ9.eyJpc3MiOiJodHRwczovL2Rldi1yaTdpbmMxdDcwajAwYTdiLnVrLmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw2NWM0YWVkYmY1NTg5ZGJlODUzZTJkZWUiLCJhdWQiOiJhdXRoIiwiaWF0IjoxNzExMzI0NDI2LCJleHAiOjE3MTEzMzE2MjYsInNjb3BlIjoiIiwiYXpwIjoiUXViMDNCZUlneXhBdW51UDU3T21WYXpiZ0dtYkF1eDMiLCJwZXJtaXNzaW9ucyI6WyJ2aWV3OmFjdG9ycyIsInZpZXc6bW92aWVzIl19.clFWQFkHjfpmOjCqJahU8jmP2apz8dfV_v48HfjWi2BXFzF37l5IM2_XgIl-vq0beTB96rxxjgYOxisaqsgwWjArX280WTs4os8lPyY_gyVSzZzQ4vPqUZ_oMdgstIm0H7BeVYD24y9_4--oUSavy5xVgSqrxK0fmN_YXDq-UBe4LXSTP95CW0kdGstvxJcd7MF4MRCrQj4WOe6NEBvzOZV4p8-UW3qalbE7l7N31Xdx4yx61Yh8KYGI9J7-38Ghb_QQsmdeVZv5ZKX5UYfx7eqgiw9NdG_ghf1f_U5HbGs0xbHDpiv0RL-accdVEcnWcdFs5ENaPFqx6yDUGiWdfQ"


Cast Director Token : export ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlZNa0t5ZW93ZEdYeG9LWVQzcXFaYSJ9.eyJpc3MiOiJodHRwczovL2Rldi1yaTdpbmMxdDcwajAwYTdiLnVrLmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw2NWM1NGVkZTcyN2Y1MGQwNmJiYjM0YTUiLCJhdWQiOiJhdXRoIiwiaWF0IjoxNzExMzI0MzA2LCJleHAiOjE3MTEzMzE1MDYsInNjb3BlIjoiIiwiYXpwIjoiUXViMDNCZUlneXhBdW51UDU3T21WYXpiZ0dtYkF1eDMiLCJwZXJtaXNzaW9ucyI6WyJhZGQ6YWN0b3JzIiwiZGVsZXRlOmFjdG9ycyIsIm1vZGlmeTphY3RvcnMiLCJtb2RpZnk6bW92aWVzIiwidmlldzphY3RvcnMiLCJ2aWV3Om1vdmllcyJdfQ.NMSMpf-FjQAygyOEiASRT0GD2Nq2pf9SZIo9oeosFijz_tq2aK4KbXZX7heFl3xLxlT7ZXmM9skeyUz3NPcHUAFb_VWS56J3w-KkPIMPiqtFwHdisV42QgZ1OzrAyWinIGoDHxaNtxCAw_0pYA_6ExgSbkVfBzC0epKN-AjTOaevd-mWCGtivRxCZ7GPuj2AOXkZfNTC_O3UMQ4CEBklOUe3PbE2d3vFYHjCpviAMIhMO4CsKQd0TrtBuktKbiWSH4GDeWX65TBn_e_hD6HS_ul4iaZ6vi22dOxfG4qB8J2K8NftH9v1gO4MuFnY9FDpjIt_Z7_TrK-LBQshMXvigw"


Cast Producer Token : export ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlZNa0t5ZW93ZEdYeG9LWVQzcXFaYSJ9.eyJpc3MiOiJodHRwczovL2Rldi1yaTdpbmMxdDcwajAwYTdiLnVrLmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw2NWZlZGFiZGFlZjM4MjdhNjRjMTAwYWIiLCJhdWQiOiJhdXRoIiwiaWF0IjoxNzExMzI0MzU4LCJleHAiOjE3MTEzMzE1NTgsInNjb3BlIjoiIiwiYXpwIjoiUXViMDNCZUlneXhBdW51UDU3T21WYXpiZ0dtYkF1eDMiLCJwZXJtaXNzaW9ucyI6WyJhZGQ6YWN0b3JzIiwiYWRkOm1vdmllcyIsImRlbGV0ZTphY3RvcnMiLCJkZWxldGU6bW92aWVzIiwibW9kaWZ5OmFjdG9ycyIsIm1vZGlmeTptb3ZpZXMiLCJ2aWV3OmFjdG9ycyIsInZpZXc6bW92aWVzIl19.bbaTfXAh1Mz9YNrpCfXW2BAfZXDY7tF64IDDn1l6z6HJqS3WnX8eo5cZtlizwTMwhN1dDxjhoG_PqQkW9-mMztjfaqPDS3l1glM6LiI5RsZX_MmiokyKsD5Pl_3S0A201RJRqUu_jlR6ZT1KoUM-JvXEb-jTcKzZvRF1Q2tHNiOQXrTyi0QJDeGP7IM2VIsgK1WUpcPKg0E7npZUXanupcRNhq_hYg_cblsP8o66rnK8bdjtusOX5AxN-EyVmlml7WbOR2Z0A5sSD8mIOy38cS4VFpFkpJhue37GyUIwg_LCTls3L0Hni7FDnyd4tey6K3FkwKvugUw9KM6kCvuVwQ"

NOTE: Viewing Actors will show related Movies and vice versa. Relationships have been created to show Actors related to Movies and vice versa
———————————————————————


Run each command as required below:

They should complete as per the examples used below to populate the database:
{"message":"Actor created and assigned to movies successfully"}
dino@DC-MacPro Rubic % curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"name": "James Preston", "age": 42, "gender": "Male", "movie_ids": [2, 3]}' https://rubic.onrender.com/actors

{"message":"Actor created and assigned to movies successfully"}
dino@DC-MacPro Rubic % curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"name": "Jane Simpson", "age": 29, "gender": "Female", "movie_ids": [1, 3]}' https://rubic.onrender.com/actors

{"message":"Actor created and assigned to movies successfully"}
dino@DC-MacPro Rubic % curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"title": “The “Final, "release_date": "2024-03-24", "actor_ids": [1, 3]}’ https://rubic.onrender.com/movies
quote> 
quote> 
dino@DC-MacPro Rubic %  curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"title": "The Final", "release_date": "2024-03-24", "actor_ids": [1, 3]}' https://rubic.onrender.com/movies

{"message":"Movie created and actors assigned successfully"}
dino@DC-MacPro Rubic % curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"title": "Hollywood", "release_date": "2019-01-24", "actor_ids": [1, 2]}' https://rubic.onrender.com/movies

{"message":"Movie created and actors assigned successfully"}
dino@DC-MacPro Rubic % curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"title": "Part Three", "release_date": "2015-03-24", "actor_ids": [2, 3]}' https://rubic.onrender.com/movies

{"message":"Movie created and actors assigned successfully"}



VIEW ALL MOVIES

curl -H "Authorization: Bearer $ACCESS_TOKEN" https://rubic.onrender.com/movies


VIEW ALL ACTORS

curl -H "Authorization: Bearer $ACCESS_TOKEN" https://rubic.onrender.com/actors


CREATE AN ACTOR ASSIGNED TO A MOVIE

curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"name": "Jane Simpson", "age": 29, "gender": "Female", "movie_ids": [1, 3]}' https://rubic.onrender.com/actors


CREATE A MOVIE ASSIGNED TO AN ACTOR

curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"title": "New Movie Title", "release_date": "2024-03-24", "actor_ids": [1, 2]}' https://rubic.onrender.com/movies


EDIT AN ACTOR

curl -X PATCH https://rubic.onrender.com/actors/1 \
     -H 'Content-Type: application/json' \
     -d '{"name": "Updated Actor Name", "age": 45, "gender": "Male", "movie_ids": [3, 4]}'


EDIT A MOVIE

curl -X PATCH https://rubic.onrender.com/movies/1 \
     -H 'Content-Type: application/json' \
     -d '{"title": "Updated Movie Title", "release_date": "2023-12-31", "actor_ids": [2, 3]}'


VIEW MOVIE BY ID

curl -H "Authorization: Bearer $ACCESS_TOKEN" https://rubic.onrender.com/movies/<id>


VIEW ACTOR BY ID

curl -H "Authorization: Bearer $ACCESS_TOKEN" https://rubic.onrender.com/actors/<id>


DELETE MOVIE BY ID

curl -X DELETE -H "Authorization: Bearer $ACCESS_TOKEN" https://rubic.onrender.com/movies/2


DELETE ACTOR BY ID

curl -X DELETE -H "Authorization: Bearer $ACCESS_TOKEN" https://rubic.onrender.com/actors/<id>


UPDATE MOVIE AND ACTOR RELATIONSHIP

curl -X PATCH -H "Content-Type: application/json" -H "Authorization: Bearer $ACCESS_TOKEN" -d '{"name": "New Actor Name", "age": 30, "gender": "Male", "movie_ids": [1, 2]}' https://rubic.onrender.com/actors/<actor_id>



============
THE PROJECT
============

The following files have been coded for this project and are available in GitHub and Hosted on Render:
app.py
auth.py
models.py
.env
requirements.txt
setup.sh

The endpoints are restricted by Auth0 permissions / account roles. See Auth0 further down.

ENDPOINTS
		GET /actors
	•	Required Permission: view:actors
		GET /movies
	•	Required Permission: view:movies
		GET /actors/int:id
	•	Required Permission: view:actors
		GET /movies/int:id
	•	Required Permission: view:movies
		PATCH /actors/int:actor_id
	•	Required Permission: modify:actors
		PATCH /movies/int:movie_id
	•	Required Permission: modify:movies
		DELETE /actors/int:id
	•	Required Permission: delete:actors
		DELETE /movies/int:id
	•	Required Permission: delete:movies
		POST /actors
	•	Required Permission: add:actors
		POST /movies
	•	Required Permission: add:movies


This uses the Postgres database with the following schema :
Schema |    Name     | Type  | 
--------+-------------+-------+
 public | actors      | table |
 public | movie_actor | table |
 public | movies      | table |

NB: Data has been added for test purposes into each table

ERROR CHECKING
Error checking included for the for absence of database records in each endpoint.
Also Error reporting for error codes 400, 403, 404 and 500.



=====
AUTH0
=====
The following Permissions have been created in AUTH0

ASSISTANT ROLE PERMISSIONS

		GET /actors
	•	Required Permission: view:actors
		GET /movies
	•	Required Permission: view:movies
		GET /actors/int:id
	•	Required Permission: view:actors
		GET /movies/int:id
	•	Required Permission: view:movies


DIRECTOR ROLE PERMISSIONS

		GET /actors
	•	Required Permission: view:actors
		GET /movies
	•	Required Permission: view:movies
		GET /actors/int:id
	•	Required Permission: view:actors
		GET /movies/int:id
	•	Required Permission: view:movies
		PATCH /actors/int:actor_id
	•	Required Permission: modify:actors
		PATCH /movies/int:movie_id
	•	Required Permission: modify:movies
		DELETE /actors/int:id
	•	Required Permission: delete:actors
       POST /actors
	•	Required Permission: add:actors


PRODUCER ROLE PERMISSIONS

		GET /actors
	•	Required Permission: view:actors
		GET /movies
	•	Required Permission: view:movies
		GET /actors/int:id
	•	Required Permission: view:actors
		GET /movies/int:id
	•	Required Permission: view:movies
		PATCH /actors/int:actor_id
	•	Required Permission: modify:actors
		PATCH /movies/int:movie_id
	•	Required Permission: modify:movies
		DELETE /actors/int:id
	•	Required Permission: delete:actors
		DELETE /movies/int:id
	•	Required Permission: delete:movies
		POST /actors
	•	Required Permission: add:actors
		POST /movies
	•	Required Permission: add:movies



======
RENDER
======

Render has been used for this project on the URL : https://rubic.onrender.com

Environmental Variables are manually added to Render and are available in the .env file.

(A setup.sh file was used to install the dependancies due to build issues in Render.)
However the requirement.txt file is also attached.


======
GITHUB
======

All code has been uploaded to Github under the following URL: https://github.com/cairndean/Rubic
